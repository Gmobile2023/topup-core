2021-05-24 15:17:44.244 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:17:44.336 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:17:44.336 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:17:44.337 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:17:44.416 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:24280:10856a58 successfully announced in 31.3437 ms
2021-05-24 15:17:44.430 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:24280:10856a58 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:17:44.465 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 15:17:44.550 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:24280:10856a58 all the dispatchers started
2021-05-24 15:17:45.082 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60ab6128694eb587d7631099': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:16.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 15:17:45.106 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60ab6128694eb587d76310a0': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:29.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 15:17:45.260 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60ab6129694eb587d76310a9': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:43.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 15:17:45.567 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 15:17:47.018 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 15:17:47.048 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 15:17:47.066 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 15:17:47.073 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:17:47.074 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:17:47.075 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:17:47.076 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:17:47.079 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:17:47.091 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:17:47.091 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:17:47.093 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:17:47.097 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:24280:bd938852 successfully announced in 7.4565 ms
2021-05-24 15:17:47.098 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:24280:bd938852 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:17:47.104 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:24280:6995c6f8 successfully announced in 6.5337 ms
2021-05-24 15:17:47.105 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:24280:6995c6f8 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:17:47.268 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:24280:bd938852 all the dispatchers started
2021-05-24 15:17:47.271 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:24280:6995c6f8 all the dispatchers started
2021-05-24 15:17:47.382 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 15:17:47.383 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 15:17:47.383 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 15:17:47.383 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 15:18:11.879 +07:00 [INF] [Microsoft.AspNetCore.Hosting.Diagnostics.GET] Request starting HTTP/1.1 GET http://localhost:6790/ - -
2021-05-24 15:18:11.963 +07:00 [INF] [Microsoft.AspNetCore.Hosting.Diagnostics.GET] Request finished HTTP/1.1 GET http://localhost:6790/ - - - 404 0 - 85.0044ms
2021-05-24 15:18:21.154 +07:00 [ERR] [Hangfire.Mongo.DistributedLock.MongoDistributedLock.] Hangfire:recurring-jobs:lock - Unable to clean up locks on the resource. Details:
MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. 10.8.0.5:27019
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.AcquiredConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ServerChannelSource.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ChannelSourceHandle.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Initialize(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Create(IWriteBinding binding, Boolean retryRequested, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.Execute(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperation[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperation[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IClientSessionHandle session, IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.<>c__DisplayClass27_0.<BulkWrite>b__0(IClientSessionHandle session)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSession[TResult](Func`2 func, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.<>c__DisplayClass39_0.<DeleteOne>b__0(IEnumerable`1 requests)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, Func`2 bulkWrite)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, CancellationToken cancellationToken)
   at Hangfire.Mongo.DistributedLock.MongoDistributedLock.Cleanup()
2021-05-24 15:18:23.375 +07:00 [ERR] [Hangfire.Mongo.DistributedLock.MongoDistributedLock.] Hangfire:locks:schedulepoller - Unable to clean up locks on the resource. Details:
MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. 10.8.0.5:27019
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.AcquiredConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ServerChannelSource.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ChannelSourceHandle.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Initialize(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Create(IWriteBinding binding, Boolean retryRequested, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.Execute(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperation[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperation[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IClientSessionHandle session, IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.<>c__DisplayClass27_0.<BulkWrite>b__0(IClientSessionHandle session)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSession[TResult](Func`2 func, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.<>c__DisplayClass39_0.<DeleteOne>b__0(IEnumerable`1 requests)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, Func`2 bulkWrite)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, CancellationToken cancellationToken)
   at Hangfire.Mongo.DistributedLock.MongoDistributedLock.Cleanup()
2021-05-24 15:18:23.390 +07:00 [ERR] [Hangfire.Mongo.DistributedLock.MongoDistributedLock.] Hangfire:recurring-jobs:lock - Unable to clean up locks on the resource. Details:
MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. 10.8.0.5:27019
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.AcquiredConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ServerChannelSource.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ChannelSourceHandle.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Initialize(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Create(IWriteBinding binding, Boolean retryRequested, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.Execute(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperation[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperation[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IClientSessionHandle session, IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.<>c__DisplayClass27_0.<BulkWrite>b__0(IClientSessionHandle session)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSession[TResult](Func`2 func, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.<>c__DisplayClass39_0.<DeleteOne>b__0(IEnumerable`1 requests)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, Func`2 bulkWrite)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, CancellationToken cancellationToken)
   at Hangfire.Mongo.DistributedLock.MongoDistributedLock.Cleanup()
2021-05-24 15:18:23.421 +07:00 [ERR] [Hangfire.Mongo.DistributedLock.MongoDistributedLock.] Hangfire:locks:schedulepoller - Unable to clean up locks on the resource. Details:
MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. 10.8.0.5:27019
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.AcquiredConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ServerChannelSource.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ChannelSourceHandle.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Initialize(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Create(IWriteBinding binding, Boolean retryRequested, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.Execute(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperation[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperation[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IClientSessionHandle session, IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.<>c__DisplayClass27_0.<BulkWrite>b__0(IClientSessionHandle session)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSession[TResult](Func`2 func, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.<>c__DisplayClass39_0.<DeleteOne>b__0(IEnumerable`1 requests)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, Func`2 bulkWrite)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, CancellationToken cancellationToken)
   at Hangfire.Mongo.DistributedLock.MongoDistributedLock.Cleanup()
2021-05-24 15:18:23.436 +07:00 [ERR] [Hangfire.Mongo.DistributedLock.MongoDistributedLock.] Hangfire:recurring-jobs:lock - Unable to clean up locks on the resource. Details:
MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. 10.8.0.5:27019
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.AcquiredConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ServerChannelSource.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Bindings.ChannelSourceHandle.GetChannel(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Initialize(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.RetryableWriteContext.Create(IWriteBinding binding, Boolean retryRequested, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.BulkMixedWriteOperation.Execute(IWriteBinding binding, CancellationToken cancellationToken)
   at MongoDB.Driver.OperationExecutor.ExecuteWriteOperation[TResult](IWriteBinding binding, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.ExecuteWriteOperation[TResult](IClientSessionHandle session, IWriteOperation`1 operation, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IClientSessionHandle session, IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.<>c__DisplayClass27_0.<BulkWrite>b__0(IClientSessionHandle session)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSession[TResult](Func`2 func, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.BulkWrite(IEnumerable`1 requests, BulkWriteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.<>c__DisplayClass39_0.<DeleteOne>b__0(IEnumerable`1 requests)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, Func`2 bulkWrite)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, DeleteOptions options, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionBase`1.DeleteOne(FilterDefinition`1 filter, CancellationToken cancellationToken)
   at Hangfire.Mongo.DistributedLock.MongoDistributedLock.Cleanup()
2021-05-24 15:18:28.375 +07:00 [ERR] [Hangfire.Mongo.MongoNotificationObserver.] Error observing 'hangfire.notifications'
MongoDB.Driver.MongoConnectionException: An exception occurred while receiving a message from the server.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at MongoDB.Driver.Core.Misc.StreamExtensionMethods.ReadBytes(Stream stream, Byte[] buffer, Int32 offset, Int32 count, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.ReceiveBuffer(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.AcquiredConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandUsingCommandMessageWireProtocol`1.Execute(IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandWireProtocol`1.Execute(IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.ServerChannel.ExecuteProtocol[TResult](IWireProtocol`1 protocol, ICoreSession session, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.ServerChannel.Command[TResult](ICoreSession session, ReadPreference readPreference, DatabaseNamespace databaseNamespace, BsonDocument command, IEnumerable`1 commandPayloads, IElementNameValidator commandValidator, BsonDocument additionalOptions, Action`1 postWriteAction, CommandResponseHandling responseHandling, IBsonSerializer`1 resultSerializer, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.ExecuteGetMoreCommand(IChannelHandle channel, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.GetNextBatch(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.MoveNext(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursorEnumerator`1.MoveNext()
   at Hangfire.Mongo.MongoNotificationObserver.Execute(CancellationToken cancellationToken)
2021-05-24 15:18:28.376 +07:00 [ERR] [Hangfire.Mongo.MongoNotificationObserver.] Error observing 'hangfire.notifications'
MongoDB.Driver.MongoConnectionException: An exception occurred while receiving a message from the server.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at MongoDB.Driver.Core.Misc.StreamExtensionMethods.ReadBytes(Stream stream, Byte[] buffer, Int32 offset, Int32 count, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.ReceiveBuffer(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.AcquiredConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandUsingCommandMessageWireProtocol`1.Execute(IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandWireProtocol`1.Execute(IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.ServerChannel.ExecuteProtocol[TResult](IWireProtocol`1 protocol, ICoreSession session, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.ServerChannel.Command[TResult](ICoreSession session, ReadPreference readPreference, DatabaseNamespace databaseNamespace, BsonDocument command, IEnumerable`1 commandPayloads, IElementNameValidator commandValidator, BsonDocument additionalOptions, Action`1 postWriteAction, CommandResponseHandling responseHandling, IBsonSerializer`1 resultSerializer, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.ExecuteGetMoreCommand(IChannelHandle channel, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.GetNextBatch(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.MoveNext(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursorEnumerator`1.MoveNext()
   at Hangfire.Mongo.MongoNotificationObserver.Execute(CancellationToken cancellationToken)
2021-05-24 15:18:28.376 +07:00 [ERR] [Hangfire.Mongo.MongoNotificationObserver.] Error observing 'hangfire.notifications'
MongoDB.Driver.MongoConnectionException: An exception occurred while receiving a message from the server.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at MongoDB.Driver.Core.Misc.StreamExtensionMethods.ReadBytes(Stream stream, Byte[] buffer, Int32 offset, Int32 count, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.ReceiveBuffer(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.PooledConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.ConnectionPools.ExclusiveConnectionPool.AcquiredConnection.ReceiveMessage(Int32 responseTo, IMessageEncoderSelector encoderSelector, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandUsingCommandMessageWireProtocol`1.Execute(IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.WireProtocol.CommandWireProtocol`1.Execute(IConnection connection, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.ServerChannel.ExecuteProtocol[TResult](IWireProtocol`1 protocol, ICoreSession session, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.Server.ServerChannel.Command[TResult](ICoreSession session, ReadPreference readPreference, DatabaseNamespace databaseNamespace, BsonDocument command, IEnumerable`1 commandPayloads, IElementNameValidator commandValidator, BsonDocument additionalOptions, Action`1 postWriteAction, CommandResponseHandling responseHandling, IBsonSerializer`1 resultSerializer, MessageEncoderSettings messageEncoderSettings, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.ExecuteGetMoreCommand(IChannelHandle channel, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.GetNextBatch(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursor`1.MoveNext(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Operations.AsyncCursorEnumerator`1.MoveNext()
   at Hangfire.Mongo.MongoNotificationObserver.Execute(CancellationToken cancellationToken)
2021-05-24 15:18:51.024 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:18:51.111 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:18:51.111 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:18:51.112 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:18:51.189 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:26284:c9b4a321 successfully announced in 52.6085 ms
2021-05-24 15:18:51.194 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:26284:c9b4a321 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:18:51.299 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:26284:c9b4a321 all the dispatchers started
2021-05-24 15:18:51.565 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 15:18:51.772 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 15:18:51.805 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount request)
2021-05-24 15:18:51.993 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance)
2021-05-24 15:18:52.137 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance_Error:System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.WarningBalance() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 370
2021-05-24 15:18:52.137 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount error:System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.CheckLimitMinBalanceAccount() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 293
2021-05-24 15:18:52.156 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621658528882+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":5,"responseQuery":"{\"results\":{\"status\":0,\"setCustomerReference\":false,\"setCreationDate\":false,\"setInvoiceReference\":false,\"setExpirationDate\":false,\"setInvoiceAttributes\":false,\"setPayDate\":false,\"setCurrency\":false,\"setStatus\":false,\"setDueDate\":false,\"setAmount\":false},\"responseStatus\":{\"errorCode\":\"4033\",\"message\":\"Giao dịch lỗi từ phía Nhà cung cấp.\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 15:18:52.442 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60ab6128694eb587d7631099': an exception occurred. Retry attempt 2 of 10 will be performed in 00:01:12.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.AutoCheckPayBill() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 213
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
2021-05-24 15:18:52.560 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 15:18:52.592 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 15:18:52.607 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 15:18:52.614 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:18:52.614 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:18:52.615 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:18:52.615 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:18:52.644 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:18:52.645 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:18:52.645 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:18:52.646 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:18:52.652 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:26284:4ab65a79 successfully announced in 7.5037 ms
2021-05-24 15:18:52.652 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:26284:4ab65a79 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:18:52.659 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:26284:d1034f46 successfully announced in 9.7355 ms
2021-05-24 15:18:52.662 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:26284:d1034f46 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:18:52.797 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:26284:4ab65a79 all the dispatchers started
2021-05-24 15:18:52.812 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:26284:d1034f46 all the dispatchers started
2021-05-24 15:18:53.012 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 15:18:53.013 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 15:18:53.014 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 15:18:53.014 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 15:20:07.637 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 15:20:07.645 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621658528882+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":5,"responseQuery":"{\"results\":{\"status\":0,\"setCustomerReference\":false,\"setCreationDate\":false,\"setInvoiceReference\":false,\"setExpirationDate\":false,\"setInvoiceAttributes\":false,\"setPayDate\":false,\"setCurrency\":false,\"setStatus\":false,\"setDueDate\":false,\"setAmount\":false},\"responseStatus\":{\"errorCode\":\"4033\",\"message\":\"Giao dịch lỗi từ phía Nhà cung cấp.\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 15:20:07.900 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 15:20:07.900 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 15:23:51.231 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 15:30:37.854 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:30:37.939 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:30:37.940 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:30:37.940 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:30:38.007 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:28304:68da7516 successfully announced in 38.3369 ms
2021-05-24 15:30:38.012 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:28304:68da7516 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:30:38.177 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:28304:68da7516 all the dispatchers started
2021-05-24 15:30:38.494 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 15:30:38.739 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount request)
2021-05-24 15:30:38.740 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 15:30:38.909 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance)
2021-05-24 15:30:39.098 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance_Error:System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.WarningBalance() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 370
2021-05-24 15:30:39.098 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount error:System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.CheckLimitMinBalanceAccount() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 293
2021-05-24 15:30:39.224 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621844407901+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":6,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 15:30:39.530 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60ab642ed42b98c72eac0eea': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:21.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.AutoCheckPayBill() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 213
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
2021-05-24 15:30:39.653 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 15:30:39.684 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 15:30:39.703 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 15:30:39.710 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:30:39.711 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:30:39.711 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:30:39.711 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:30:39.718 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 15:30:39.719 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 15:30:39.719 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 15:30:39.719 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 15:30:39.725 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:28304:4a0b7599 successfully announced in 6.7853 ms
2021-05-24 15:30:39.728 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:28304:4a0b7599 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:30:39.734 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:28304:495a2de9 successfully announced in 7.5843 ms
2021-05-24 15:30:39.741 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:28304:495a2de9 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 15:30:39.915 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:28304:4a0b7599 all the dispatchers started
2021-05-24 15:30:39.929 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:28304:495a2de9 all the dispatchers started
2021-05-24 15:30:39.996 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 15:30:39.997 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 15:30:39.997 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 15:30:39.997 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 15:31:08.548 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 15:31:08.556 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621844407901+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":6,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 15:31:08.719 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 15:31:08.720 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 15:31:14.018 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternalcc0bfd2074c34e43af35b0a200b350ac","receivingAccount":"NT951709","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 98.624.200đ. Thời gian giao dịch 24/05/2021 15:31:06\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT951709\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229795\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621845071976+0700)\/","correlationId":"ac6bd290e6e849ceadb736f804ac1a6e"}
2021-05-24 15:31:25.226 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 98.624.200đ. Thời gian giao dịch 24/05/2021 15:31:06\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT951709","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229795","Amount":100000}},"registration_ids":["d6S8MZjNQiuhOa3gF5Vi8k:APA91bGn-BGfwO2hWJi7wBw5LI_Nnapn55MQxMUflMUJftpLWeleC3cwgEES7mRIyHZboHAgMhgZmD9axEvnbqbGzE-vxx43pOaLZfYQBLUoSz2pNH7NR7S6JD4QKvgB_D8qN3ISd00J"]}
2021-05-24 15:31:25.962 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":3272172120839851486,"success":0,"failure":1,"canonical_ids":0,"results":[{}]}
2021-05-24 15:31:25.966 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 98.624.200đ. Thời gian giao dịch 24/05/2021 15:31:06\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT951709","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229795","Amount":100000}},"registration_ids":["dtwfO9hsINs:APA91bFvqvuU6Fbtq1ppzkn8GbOQtWTXw96r8UDmSpq6NbMr6DI51HLkmCRKZQK2hQU2Xn_Yajpnwo2n-gfl-wl4tEBHPzOemqPmcEaZkhTZvVnuTSuZXlRyfYeu6WdnCSlgQwzOjO8C"]}
2021-05-24 15:31:26.272 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":5809709941858376915,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621845085910464%e609af1cf9fd7ecd"}]}
2021-05-24 15:35:38.068 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 17:42:39.992 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 17:42:40.100 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 17:42:40.102 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 17:42:40.102 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 17:42:40.199 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:8468:01c2cf31 successfully announced in 64.7469 ms
2021-05-24 17:42:40.208 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:8468:01c2cf31 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 17:42:40.232 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 17:42:40.412 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:8468:01c2cf31 all the dispatchers started
2021-05-24 17:42:40.911 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60ab83204d2ff02c51f05015': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:26.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 17:42:40.949 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60ab83204d2ff02c51f0501c': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:35.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 17:42:41.068 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60ab83204d2ff02c51f05025': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:15.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 17:42:41.545 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 17:42:42.182 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 17:42:42.234 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 17:42:42.251 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 17:42:42.259 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 17:42:42.259 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 17:42:42.260 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 17:42:42.260 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 17:42:42.268 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 17:42:42.269 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 17:42:42.269 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 17:42:42.270 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 17:42:42.274 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8468:9064a7e8 successfully announced in 6.7672 ms
2021-05-24 17:42:42.317 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8468:9064a7e8 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 17:42:42.323 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8468:f96a90a5 successfully announced in 8.0574 ms
2021-05-24 17:42:42.326 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8468:f96a90a5 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 17:42:42.443 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8468:9064a7e8 all the dispatchers started
2021-05-24 17:42:42.472 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8468:f96a90a5 all the dispatchers started
2021-05-24 17:42:42.560 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 17:42:42.562 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 17:42:42.562 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 17:42:42.562 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 17:42:57.930 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance)
2021-05-24 17:42:58.094 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: VTDD BILLING-MASTER return: {"result":4659600000.00,"success":true,"error":{"code":0}}
2021-05-24 17:42:58.122 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: VTDD TOPUP-NT994838 return: {"result":0,"success":true,"error":{"code":0}}
2021-05-24 17:42:58.133 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-591929747","title":"Cảnh báo số dư tài khoản số dư tài khoản VTDD TOPUP","message":"Nhất Trần xin thông báo số dư tài khoản VTDD TOPUP-NT994838 hiện tại là: 0đ.\nVui lòng nạp tiền để đảm bảo dịch vụ. Trân trọng cám ơn!","module":"Balance","messageType":"Wraning","botType":"Sale"}
2021-05-24 17:43:00.222 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":221,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-591929747,"title":"Nh\u00f3m Gunner","type":"group","all_members_are_administrators":true},"date":1621852980,"text":"\u26a0 C\u1ea3nh b\u00e1o s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n VTDD TOPUP\n24/05/2021 17:42:58, VietNam-[Balance]-[Warning]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n VTDD TOPUP-NT994838 hi\u1ec7n t\u1ea1i l\u00e0: 0\u0111.\nVui l\u00f2ng n\u1ea1p ti\u1ec1n \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o d\u1ecbch v\u1ee5. Tr\u00e2n tr\u1ecdng c\u00e1m \u01a1n!"}
2021-05-24 17:43:10.781 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 17:43:10.902 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621845068720+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":7,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 17:43:11.365 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 17:43:11.366 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 17:43:22.748 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal278dd76c091a4feba1533083ba031905","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 314.000đ. Thời gian giao dịch 24/05/2021 17:43:01\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229803\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621853000001+0700)\/","correlationId":"935b091862a74aee872dca8d4da81e31"}
2021-05-24 17:43:22.940 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 314.000đ. Thời gian giao dịch 24/05/2021 17:43:01\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229803","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 17:43:23.479 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":3570408111445479861,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621853003653235%e609af1cf9fd7ecd"}]}
2021-05-24 17:43:26.168 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount request)
2021-05-24 17:43:26.228 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: MASTER return: {"result":4659500000.00,"success":true,"error":{"code":0}}
2021-05-24 17:45:12.244 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 17:45:12.253 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621852991366+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":8,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 17:45:12.373 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 17:45:12.373 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 17:46:05.397 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal278dd76c091a4feba1533083ba031905","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 414.000đ. Thời gian giao dịch 24/05/2021 17:45:58\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229804\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621853163123+0700)\/","correlationId":"32801eaa70d04e1082223ee1c0ed38a1"}
2021-05-24 17:46:05.468 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 414.000đ. Thời gian giao dịch 24/05/2021 17:45:58\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229804","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 17:46:05.751 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":1684988882372938485,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621853165925687%e609af1cf9fd7ecd"}]}
2021-05-24 17:46:13.878 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] BotSendMessageConsumer request:{"title":"Thông báo Nạp tiền TK","message":" Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 414.000đ, lúc 24/05/2021 17:46:09.%0ANội dung: TEST.%0AMã giao dịch: D2105240229804","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:46:18.982 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":" Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 414.000đ, lúc 24/05/2021 17:46:09.%0ANội dung: TEST.%0AMã giao dịch: D2105240229804","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:46:30.132 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":" Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 414.000đ, lúc 24/05/2021 17:46:09.%0ANội dung: TEST.%0AMã giao dịch: D2105240229804","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:46:30.151 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessage request: {"title":"Thông báo Nạp tiền TK","message":" Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 414.000đ, lúc 24/05/2021 17:46:09.%0ANội dung: TEST.%0AMã giao dịch: D2105240229804","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:46:31.310 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":222,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621853191,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 17:46:30, VietNam-[Balance]-[0]\n Nh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 414.000\u0111, l\u00fac 24/05/2021 17:46:09.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229804"}
2021-05-24 17:46:31.338 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessage return:{"ok":true,"result":{"message_id":223,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621853191,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 17:46:30, VietNam-[Balance]-[0]\n Nh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 414.000\u0111, l\u00fac 24/05/2021 17:46:09.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229804"}
2021-05-24 17:47:59.175 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal278dd76c091a4feba1533083ba031905","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 514.000đ. Thời gian giao dịch 24/05/2021 17:47:52\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229805\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621853272869+0700)\/","correlationId":"6df49dfd16bf4ef9a169a73670dcd38e"}
2021-05-24 17:47:59.762 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 514.000đ. Thời gian giao dịch 24/05/2021 17:47:52\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229805","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 17:47:59.976 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":1162090746837623116,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621853280160852%e609af1cf9fd7ecd"}]}
2021-05-24 17:49:05.356 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal278dd76c091a4feba1533083ba031905","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 614.000đ. Thời gian giao dịch 24/05/2021 17:49:05\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229806\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621853345334+0700)\/","correlationId":"088b5d3f607f4707aee8c32ae0021dc9"}
2021-05-24 17:49:05.387 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 614.000đ. Thời gian giao dịch 24/05/2021 17:49:05\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229806","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 17:49:05.720 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":8951872361060169293,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621853345925827%e609af1cf9fd7ecd"}]}
2021-05-24 17:49:20.781 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] BotSendMessageConsumer request:{"title":"Thông báo Nạp tiền TK","message":" Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 614.000đ, lúc 24/05/2021 17:49:08.%0ANội dung: TEST.%0AMã giao dịch: D2105240229806","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:49:20.783 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessage request: {"title":"Thông báo Nạp tiền TK","message":" Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 614.000đ, lúc 24/05/2021 17:49:08.%0ANội dung: TEST.%0AMã giao dịch: D2105240229806","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:49:20.848 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":" Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 614.000đ, lúc 24/05/2021 17:49:08.%0ANội dung: TEST.%0AMã giao dịch: D2105240229806","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:49:27.697 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":" Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 614.000đ, lúc 24/05/2021 17:49:08.%0ANội dung: TEST.%0AMã giao dịch: D2105240229806","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:49:28.684 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":224,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621853368,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 17:49:27, VietNam-[Balance]-[0]\n Nh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 614.000\u0111, l\u00fac 24/05/2021 17:49:08.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229806"}
2021-05-24 17:49:28.702 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessage return:{"ok":true,"result":{"message_id":225,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621853368,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 17:49:20, VietNam-[Balance]-[0]\n Nh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 614.000\u0111, l\u00fac 24/05/2021 17:49:08.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229806"}
2021-05-24 17:52:29.838 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal278dd76c091a4feba1533083ba031905","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 714.000đ. Thời gian giao dịch 24/05/2021 17:52:29\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229807\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621853549823+0700)\/","correlationId":"5620302bddca473090fdfef4dc79dde6"}
2021-05-24 17:52:29.879 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 714.000đ. Thời gian giao dịch 24/05/2021 17:52:29\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229807","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 17:52:30.163 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":6649423912985286836,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621853550348813%e609af1cf9fd7ecd"}]}
2021-05-24 17:54:15.796 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal278dd76c091a4feba1533083ba031905","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 814.000đ. Thời gian giao dịch 24/05/2021 17:54:15\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229808\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621853655494+0700)\/","correlationId":"df9def6bd6284c669798ed9b4abd9208"}
2021-05-24 17:54:15.834 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 814.000đ. Thời gian giao dịch 24/05/2021 17:54:15\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229808","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 17:54:16.218 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":156694101151729679,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621853656400788%e609af1cf9fd7ecd"}]}
2021-05-24 17:57:24.997 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal278dd76c091a4feba1533083ba031905","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 914.000đ. Thời gian giao dịch 24/05/2021 17:57:24\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229809\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621853844713+0700)\/","correlationId":"e118390eaddb450285f41828803019c3"}
2021-05-24 17:57:25.036 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 914.000đ. Thời gian giao dịch 24/05/2021 17:57:24\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229809","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 17:57:25.341 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":6738355299720013737,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621853845535038%e609af1cf9fd7ecd"}]}
2021-05-24 17:58:06.111 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] BotSendMessageConsumer request:{"title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 914.000đ, lúc 24/05/2021 17:57:34.%0ANội dung: TEST.%0AMã giao dịch: D2105240229809","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:58:09.400 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessage request: {"title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 914.000đ, lúc 24/05/2021 17:57:34.%0ANội dung: TEST.%0AMã giao dịch: D2105240229809","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:58:09.400 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 914.000đ, lúc 24/05/2021 17:57:34.%0ANội dung: TEST.%0AMã giao dịch: D2105240229809","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:58:12.375 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 914.000đ, lúc 24/05/2021 17:57:34.%0ANội dung: TEST.%0AMã giao dịch: D2105240229809","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 17:58:23.412 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessage return:{"ok":true,"result":{"message_id":226,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621853902,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 17:58:10, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 914.000\u0111, l\u00fac 24/05/2021 17:57:34.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229809"}
2021-05-24 17:58:23.801 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":227,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621853903,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 17:58:14, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 914.000\u0111, l\u00fac 24/05/2021 17:57:34.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229809"}
2021-05-24 21:02:14.961 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:02:15.040 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:02:15.041 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:02:15.041 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:02:15.094 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:18020:ca90f0f7 successfully announced in 24.3981 ms
2021-05-24 21:02:15.104 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:18020:ca90f0f7 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:02:15.133 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 21:02:15.291 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:18020:ca90f0f7 all the dispatchers started
2021-05-24 21:02:15.805 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abb1e7e5660c1d12826585': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:25.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 21:02:15.841 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abb1e7e5660c1d1282658c': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:17.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 21:02:15.937 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abb1e7e5660c1d12826595': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:29.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 54
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 21:02:17.390 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 21:02:25.223 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] BotSendMessageConsumer request:{"Title":"Thông báo Nạp tiền TK","Message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.014.000đ, lúc 24/05/2021 21:01:43.%0ANội dung: TEST.%0AMã giao dịch: D2105240229810","Module":"Balance","MessageType":"0","BotType":"0"}
2021-05-24 21:02:25.223 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"ChatId":"-438003503","Title":"Thông báo Nạp tiền TK","Message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.014.000đ, lúc 24/05/2021 21:01:43.%0ANội dung: TEST.%0AMã giao dịch: D2105240229810","Module":"Balance","MessageType":"0","BotType":"0"}
2021-05-24 21:02:25.223 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal8acfabaa43ee4bfba80439649a958979","ReceivingAccount":"NT938890","Body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.014.000đ. Thời gian giao dịch 24/05/2021 21:01:39\r\n        ","Title":"Thông báo nạp tiền","Data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229810\",\"Amount\":100000.00}}","AppNotificationName":"App.Deposit","TimeStamp":"\/Date(1621864899372+0700)\/","CorrelationId":"25e0f050c42b40929811e1b7ef4bdc30"}
2021-05-24 21:02:27.405 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessage request: {"Title":"Thông báo Nạp tiền TK","Message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.014.000đ, lúc 24/05/2021 21:01:43.%0ANội dung: TEST.%0AMã giao dịch: D2105240229810","Module":"Balance","MessageType":"0","BotType":"0"}
2021-05-24 21:02:28.205 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"ChatId":"-438003503","Title":"Thông báo Nạp tiền TK","Message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.014.000đ, lúc 24/05/2021 21:01:43.%0ANội dung: TEST.%0AMã giao dịch: D2105240229810","Module":"Balance","MessageType":"0","BotType":"0"}
2021-05-24 21:02:32.412 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.014.000đ. Thời gian giao dịch 24/05/2021 21:01:39\r\n        ","sound":"sampleaudio"},"data":"{Type:App.Payment,Properties:{__type:HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared,PartnerCode:NT938890,TransType:Deposit,ServiceCode:DEPOSIT,TransCode:D2105240229810,Amount:100000.00}}","registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 21:02:32.504 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 21:02:32.554 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621853112374+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":9,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 21:02:32.916 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abb1e7e5660c1d1282658c': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:36.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.AutoCheckPayBill() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 213
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
2021-05-24 21:02:33.008 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 21:02:33.056 +07:00 [ERR] [ServiceStack.AsyncServiceClient.] System.Net.WebException: The remote server returned an error: (400) Bad Request.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.Net.WebRequest.<>c.<GetResponseAsync>b__68_2(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at ServiceStack.AsyncServiceClient.SendWebRequestAsync[T](String httpMethod, String absoluteUrl, Object request, CancellationToken token, Boolean recall) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack.Client\AsyncServiceClient.cs:line 263
2021-05-24 21:02:33.082 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 21:02:33.097 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 21:02:33.173 +07:00 [ERR] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification to FCM error:400 Bad Request
Code: Bad Request, Message:

2021-05-24 21:02:33.175 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:02:33.175 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:02:33.176 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:02:33.176 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:02:33.180 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:02:33.181 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:02:33.181 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:02:33.181 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:02:33.188 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:18020:f8bb5db7 successfully announced in 8.1366 ms
2021-05-24 21:02:33.189 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:18020:f8bb5db7 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:02:33.193 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:18020:9f077260 successfully announced in 7.4886 ms
2021-05-24 21:02:33.198 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:18020:9f077260 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:02:33.333 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:18020:f8bb5db7 all the dispatchers started
2021-05-24 21:02:33.352 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:18020:9f077260 all the dispatchers started
2021-05-24 21:02:33.432 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 21:02:33.433 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 21:02:33.433 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 21:02:33.434 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":228,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621864953,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 21:02:32, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 1.014.000\u0111, l\u00fac 24/05/2021 21:01:43.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229810"}
2021-05-24 21:02:33.434 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 21:02:33.495 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessage return:{"ok":true,"result":{"message_id":229,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621864953,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 21:02:31, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 1.014.000\u0111, l\u00fac 24/05/2021 21:01:43.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229810"}
2021-05-24 21:02:47.587 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount request)
2021-05-24 21:02:47.652 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: MASTER return: {"result":4658800000.00,"success":true,"error":{"code":0}}
2021-05-24 21:02:47.662 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance)
2021-05-24 21:02:47.682 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: VTDD BILLING-MASTER return: {"result":4658800000.00,"success":true,"error":{"code":0}}
2021-05-24 21:02:47.711 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: VTDD TOPUP-NT994838 return: {"result":0,"success":true,"error":{"code":0}}
2021-05-24 21:35:28.069 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:35:28.149 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:35:28.149 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:35:28.150 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:35:28.204 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:14324:c6f6f65a successfully announced in 24.413 ms
2021-05-24 21:35:28.213 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:14324:c6f6f65a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:35:28.245 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 21:35:28.334 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:14324:c6f6f65a all the dispatchers started
2021-05-24 21:35:28.762 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abb9b04a7ff842d3a92055': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:36.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 50
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 21:35:28.808 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abb9b04a7ff842d3a92063': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:30.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 50
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 21:35:28.766 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abb1e7e5660c1d1282658c': an exception occurred. Retry attempt 3 of 10 will be performed in 00:00:52.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 50
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 21:35:28.911 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abb9b04a7ff842d3a9206d': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:36.
System.NullReferenceException: Object reference not set to an instance of an object.
   at HLS.Paygate.Common.Domain.Services.CommonAppService..ctor(IConfiguration configuration, ICommonMongoRepository reportMongoRepository, ILogger`1 logger, IDateTimeHelper dateHepper, INotificationSevice notification, IBotMessageService bot, IEmailSender emailSender) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 50
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetServiceOrCreateInstance(IServiceProvider provider, Type type)
   at Hangfire.AspNetCore.AspNetCoreJobActivatorScope.Resolve(Type type)
   at Hangfire.Server.CoreBackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_0.<PerformJobWithFilters>b__0()
   at Hangfire.Server.BackgroundJobPerformer.InvokePerformFilter(IServerFilter filter, PerformingContext preContext, Func`1 continuation)
   at Hangfire.Server.BackgroundJobPerformer.<>c__DisplayClass9_1.<PerformJobWithFilters>b__2()
   at Hangfire.Server.BackgroundJobPerformer.PerformJobWithFilters(PerformContext context, IEnumerable`1 filters)
   at Hangfire.Server.BackgroundJobPerformer.Perform(PerformContext context)
   at Hangfire.Server.Worker.PerformJob(BackgroundProcessContext context, IStorageConnection connection, String jobId)
2021-05-24 21:35:29.139 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 21:35:29.635 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 21:35:29.674 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 21:35:29.708 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 21:35:29.715 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:35:29.720 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:35:29.721 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:35:29.722 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:35:29.730 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:35:29.731 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:35:29.731 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:35:29.732 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:35:29.738 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14324:bf81ce17 successfully announced in 7.7533 ms
2021-05-24 21:35:29.738 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14324:bf81ce17 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:35:29.743 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14324:2c1f1d9b successfully announced in 7.5876 ms
2021-05-24 21:35:29.751 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14324:2c1f1d9b is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:35:29.859 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14324:bf81ce17 all the dispatchers started
2021-05-24 21:35:29.885 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14324:2c1f1d9b all the dispatchers started
2021-05-24 21:35:29.979 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 21:35:29.980 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 21:35:29.981 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 21:35:29.981 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 21:35:58.878 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount request)
2021-05-24 21:35:59.015 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: MASTER return: {"result":4658800000.00,"success":true,"error":{"code":0}}
2021-05-24 21:36:04.499 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal3323746d88294e9280ec7674cddfc45e","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.114.000đ. Thời gian giao dịch 24/05/2021 21:36:04\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229811\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621866964232+0700)\/","correlationId":"0466d47c58d04c43a51dc3f27068f381"}
2021-05-24 21:36:04.721 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.114.000đ. Thời gian giao dịch 24/05/2021 21:36:04\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229811","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 21:36:05.398 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":7124118550491200249,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621866965558732%e609af1cf9fd7ecd"}]}
2021-05-24 21:36:14.029 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 21:36:14.058 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621853112374+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":9,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 21:36:14.109 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance)
2021-05-24 21:36:14.141 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: VTDD BILLING-MASTER return: {"result":4658700000.00,"success":true,"error":{"code":0}}
2021-05-24 21:36:14.165 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: VTDD TOPUP-NT994838 return: {"result":0,"success":true,"error":{"code":0}}
2021-05-24 21:36:18.517 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 21:36:18.517 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 21:36:18.517 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-591929747","title":"Cảnh báo số dư tài khoản số dư tài khoản VTDD TOPUP","message":"Nhất Trần xin thông báo số dư tài khoản VTDD TOPUP-NT994838 hiện tại là: 0đ.\nVui lòng nạp tiền để đảm bảo dịch vụ. Trân trọng cám ơn!","module":"Balance","messageType":"Wraning","botType":"Sale"}
2021-05-24 21:36:32.952 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 21:36:32.959 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621866978520+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":10,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 21:36:33.089 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 21:36:33.091 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 21:36:33.963 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":230,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-591929747,"title":"Nh\u00f3m Gunner","type":"group","all_members_are_administrators":true},"date":1621866994,"text":"\u26a0 C\u1ea3nh b\u00e1o s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n VTDD TOPUP\n24/05/2021 21:36:23, VietNam-[Balance]-[Warning]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n VTDD TOPUP-NT994838 hi\u1ec7n t\u1ea1i l\u00e0: 0\u0111.\nVui l\u00f2ng n\u1ea1p ti\u1ec1n \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o d\u1ecbch v\u1ee5. Tr\u00e2n tr\u1ecdng c\u00e1m \u01a1n!"}
2021-05-24 21:38:37.654 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal3323746d88294e9280ec7674cddfc45e","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.214.000đ. Thời gian giao dịch 24/05/2021 21:38:37\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229812\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621867117637+0700)\/","correlationId":"371aec34ee7f441ea982ab34f0a948b9"}
2021-05-24 21:38:37.695 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.214.000đ. Thời gian giao dịch 24/05/2021 21:38:37\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229812","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 21:38:37.958 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":1386818064689552230,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621867118157343%e609af1cf9fd7ecd"}]}
2021-05-24 21:40:32.320 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:40:32.406 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:40:32.406 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:40:32.407 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:40:32.470 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:8996:6e8a004c successfully announced in 23.856 ms
2021-05-24 21:40:32.479 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:8996:6e8a004c is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:40:32.701 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:8996:6e8a004c all the dispatchers started
2021-05-24 21:40:33.673 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 21:40:34.285 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 21:40:34.315 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 21:40:34.330 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 21:40:34.337 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:40:34.337 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:40:34.337 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:40:34.337 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:40:34.341 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 21:40:34.365 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 21:40:34.366 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 21:40:34.366 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 21:40:34.377 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8996:6019024e successfully announced in 11.7264 ms
2021-05-24 21:40:34.383 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8996:aac8f9c5 successfully announced in 11.0316 ms
2021-05-24 21:40:34.383 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8996:6019024e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:40:34.386 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8996:aac8f9c5 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 21:40:34.604 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8996:6019024e all the dispatchers started
2021-05-24 21:40:34.612 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:8996:aac8f9c5 all the dispatchers started
2021-05-24 21:40:34.817 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 21:40:34.818 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 21:40:34.819 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 21:40:34.819 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 21:42:34.185 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal6e696c52027944a294b34afa59115f41","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.314.000đ. Thời gian giao dịch 24/05/2021 21:42:33\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229813\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621867353680+0700)\/","correlationId":"61b33184256945618eaa7ee0590b7b58"}
2021-05-24 21:42:37.199 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.SendBotMessageToGroup, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal6e696c52027944a294b34afa59115f41","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.314.000đ, lúc 24/05/2021 21:42:34.%0ANội dung: TEST.%0AMã giao dịch: D2105240229813","module":"Balance","messageType":"0","botType":"0","chatId":"-438003503","timeStamp":"\/Date(1621867354059+0700)\/","correlationId":"b97e745e2e1843278cc71e03a866cf51"}
2021-05-24 21:42:55.171 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.314.000đ, lúc 24/05/2021 21:42:34.%0ANội dung: TEST.%0AMã giao dịch: D2105240229813","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 21:42:57.588 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.314.000đ. Thời gian giao dịch 24/05/2021 21:42:33\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229813","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 21:42:58.193 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":6141518035473227335,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621867378300707%e609af1cf9fd7ecd"}]}
2021-05-24 21:42:58.541 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":231,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621867378,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 21:42:56, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 1.314.000\u0111, l\u00fac 24/05/2021 21:42:34.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229813"}
2021-05-24 21:45:09.520 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 21:45:09.553 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621866993091+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":11,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 21:45:09.724 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 21:45:09.724 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 21:45:12.941 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal6e696c52027944a294b34afa59115f41","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.414.000đ. Thời gian giao dịch 24/05/2021 21:45:12\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229814\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621867512913+0700)\/","correlationId":"cd4db311dfc1419caa08b236a4ecb93f"}
2021-05-24 21:45:12.989 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.414.000đ. Thời gian giao dịch 24/05/2021 21:45:12\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229814","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 21:46:11.140 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 21:46:11.234 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.SendBotMessageToGroup, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal6e696c52027944a294b34afa59115f41","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.414.000đ, lúc 24/05/2021 21:45:12.%0ANội dung: TEST.%0AMã giao dịch: D2105240229814","module":"Balance","messageType":"0","botType":"0","chatId":"-438003503","timeStamp":"\/Date(1621867512951+0700)\/","correlationId":"6662aaab236241869bc8ea7a76a8ed19"}
2021-05-24 21:46:13.965 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.414.000đ, lúc 24/05/2021 21:45:12.%0ANội dung: TEST.%0AMã giao dịch: D2105240229814","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 21:46:14.226 +07:00 [ERR] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification to FCM error:System.Net.WebException: The request timed out
 ---> System.Net.WebException: The request was aborted: The request was canceled.
   at System.Net.HttpWebRequest.CheckAbort()
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.Net.WebRequest.<>c.<GetResponseAsync>b__68_2(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at ServiceStack.AsyncServiceClient.SendWebRequestAsync[T](String httpMethod, String absoluteUrl, Object request, CancellationToken token, Boolean recall) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack.Client\AsyncServiceClient.cs:line 263
   --- End of inner exception stack trace ---
   at ServiceStack.AsyncServiceClient.SendWebRequestAsync[T](String httpMethod, String absoluteUrl, Object request, CancellationToken token, Boolean recall) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack.Client\AsyncServiceClient.cs:line 433
   at HLS.Paygate.Common.Domain.Services.NotificationSevice.PuslishNotification(String notification) in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\NotificationSevice.cs:line 429
2021-05-24 21:46:15.013 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":232,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621867575,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 21:46:13, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 1.414.000\u0111, l\u00fac 24/05/2021 21:45:12.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229814"}
2021-05-24 21:47:56.814 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.NotificationConsumer.] SendNotificationRequest: {"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.NotificationSendCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal6e696c52027944a294b34afa59115f41","receivingAccount":"NT938890","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.514.000đ. Thời gian giao dịch 24/05/2021 21:47:56\r\n        ","title":"Thông báo nạp tiền","data":"{\"Type\":\"App.Payment\",\"Properties\":{\"__type\":\"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared\",\"PartnerCode\":\"NT938890\",\"TransType\":\"Deposit\",\"ServiceCode\":\"DEPOSIT\",\"TransCode\":\"D2105240229815\",\"Amount\":100000.00}}","appNotificationName":"App.Deposit","timeStamp":"\/Date(1621867676781+0700)\/","correlationId":"01509b8f6aeb4c8e8e360aed11676a18"}
2021-05-24 21:47:56.854 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification :{"notification":{"title":"Thông báo nạp tiền","body":"Bạn vừa được nạp 100.000đ từ hệ thống, số dư hiện tại là 1.514.000đ. Thời gian giao dịch 24/05/2021 21:47:56\r\n        ","sound":"sampleaudio"},"data":{"Type":"App.Payment","Properties":{"__type":"HLS.Topup.Dtos.Notifications.SendNotificationData, HLS.Topup.Core.Shared","PartnerCode":"NT938890","TransType":"Deposit","ServiceCode":"DEPOSIT","TransCode":"D2105240229815","Amount":100000}},"registration_ids":["fiGD3XnW3xk:APA91bGCadlIpcpzr7wevUV0a0QMnY9Fm4kF2PCRgISCvSQN2C9M45o5YKRHSWJHtfxMNr53iQkHPX2HJONRneflpMTg8MeqcbhpcqQUbSh2KIAyQnfw98bnJbdHLCL2k31WDdZqAsOe"]}
2021-05-24 21:47:57.349 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.NotificationSevice.] PuslishNotification return: {"multicast_id":8329205743276961273,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1621867677531690%e609af1cf9fd7ecd"}]}
2021-05-24 21:52:27.503 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.SendBotMessageToGroup, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal6e696c52027944a294b34afa59115f41","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.514.000đ, lúc 24/05/2021 21:47:56.%0ANội dung: TEST.%0AMã giao dịch: D2105240229815","module":"Balance","messageType":"0","botType":"0","chatId":"-438003503","timeStamp":"\/Date(1621867698490+0700)\/","correlationId":"76e9da50bfa84a0cb13fd2b8c64e97b4"}
2021-05-24 21:52:29.203 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.514.000đ, lúc 24/05/2021 21:47:56.%0ANội dung: TEST.%0AMã giao dịch: D2105240229815","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 21:52:30.243 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":233,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621867950,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 21:52:29, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 1.514.000\u0111, l\u00fac 24/05/2021 21:47:56.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229815"}
2021-05-24 21:52:30.252 +07:00 [ERR] [MassTransit.ReceiveTransport.] T-FAULT rabbitmq://103.109.43.93/paygate/bot-send-message "7a100000-996b-b42e-e76c-08d91ec2f821"
MassTransit.TransportUnavailableException: Message ACK failed: 3
 ---> System.InvalidOperationException: The channel was closed: AMQP close-reason, initiated by Library, code=541, text='Unexpected Exception', classId=0, methodId=0, cause=System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.IO.BufferedStream.ReadByteSlow()
   at System.IO.BufferedStream.ReadByte()
   at RabbitMQ.Client.Impl.InboundFrame.ReadFrom(Stream reader, Byte[] frameHeaderBuffer)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ReadFrame()
   at RabbitMQ.Client.Framing.Impl.Connection.MainLoopIteration()
   at RabbitMQ.Client.Framing.Impl.Connection.MainLoop() 2
   at MassTransit.RabbitMqTransport.Pipeline.RabbitMqReceiveLockContext.Complete()
   --- End of inner exception stack trace ---
   at MassTransit.RabbitMqTransport.Pipeline.RabbitMqReceiveLockContext.Complete()
   at MassTransit.Transports.ReceivePipeDispatcher.Dispatch(ReceiveContext context, ReceiveLockContext receiveLock)
   at MassTransit.Transports.ReceivePipeDispatcher.Dispatch(ReceiveContext context, ReceiveLockContext receiveLock)
   at MassTransit.Transports.ReceivePipeDispatcher.Dispatch(ReceiveContext context, ReceiveLockContext receiveLock)
   at MassTransit.RabbitMqTransport.Pipeline.RabbitMqBasicConsumer.<>c__DisplayClass23_0.<<HandleBasicDeliver>b__0>d.MoveNext()
2021-05-24 21:52:42.382 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.SendBotMessageToGroup, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal6e696c52027944a294b34afa59115f41","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.514.000đ, lúc 24/05/2021 21:47:56.%0ANội dung: TEST.%0AMã giao dịch: D2105240229815","module":"Balance","messageType":"0","botType":"0","chatId":"-438003503","timeStamp":"\/Date(1621867698490+0700)\/","correlationId":"76e9da50bfa84a0cb13fd2b8c64e97b4"}
2021-05-24 21:52:43.392 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.514.000đ, lúc 24/05/2021 21:47:56.%0ANội dung: TEST.%0AMã giao dịch: D2105240229815","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 21:52:43.800 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":234,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621867963,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 21:52:43, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 1.514.000\u0111, l\u00fac 24/05/2021 21:47:56.\nN\u1ed9i dung: TEST.\nM\u00e3 giao d\u1ecbch: D2105240229815"}
2021-05-24 22:05:33.750 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 22:05:33.825 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 22:05:33.826 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 22:05:33.826 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 22:05:33.918 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:5140:0fcb5c8f successfully announced in 23.0165 ms
2021-05-24 22:05:33.931 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:5140:0fcb5c8f is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 22:05:33.956 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 22:05:34.037 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:5140:0fcb5c8f all the dispatchers started
2021-05-24 22:05:34.289 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 22:05:34.503 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount request)
2021-05-24 22:05:34.504 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 22:05:34.695 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance)
2021-05-24 22:05:34.835 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance_Error:System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.WarningBalance() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 370
2021-05-24 22:05:34.835 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckLimitMinBalanceAccount error:System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.CheckLimitMinBalanceAccount() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 293
2021-05-24 22:05:34.869 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621867509725+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":12,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 22:05:35.222 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abc0be747ffa401131bd68': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:20.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.AutoCheckPayBill() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 213
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
2021-05-24 22:05:35.426 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 22:05:35.466 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 22:05:35.485 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 22:05:35.493 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 22:05:35.498 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 22:05:35.498 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 22:05:35.499 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 22:05:35.507 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 22:05:35.508 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 22:05:35.508 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 22:05:35.509 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 22:05:35.515 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:5140:f35c9108 successfully announced in 8.5537 ms
2021-05-24 22:05:35.516 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:5140:f35c9108 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 22:05:35.520 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:5140:bea5164d successfully announced in 8.3686 ms
2021-05-24 22:05:35.526 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:5140:bea5164d is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 22:05:35.661 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:5140:f35c9108 all the dispatchers started
2021-05-24 22:05:35.663 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:5140:bea5164d all the dispatchers started
2021-05-24 22:05:35.743 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 22:05:35.744 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 22:05:35.744 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 22:05:35.744 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 22:06:04.457 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 22:06:04.470 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621867509725+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":12,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 22:06:04.734 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 22:06:04.735 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 22:34:55.567 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 22:34:55.650 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 22:34:55.651 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 22:34:55.651 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 22:34:55.717 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:19164:1669a79a successfully announced in 24.3482 ms
2021-05-24 22:34:55.739 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:19164:1669a79a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 22:34:55.783 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 22:34:55.925 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:19164:1669a79a all the dispatchers started
2021-05-24 22:34:56.164 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 22:34:56.382 +07:00 [WRN] [Hangfire.Server.RecurringJobScheduler.] Recurring job 'ICommonAppService.CheckLimitMinBalanceAccount' can't be scheduled due to an error and will be retried in 00:00:15.
System.InvalidOperationException: Recurring job can't be scheduled, see inner exception for details.
 ---> Hangfire.Common.JobLoadException: Could not load the job. See inner exception for the details.
 ---> System.InvalidOperationException: The type `HLS.Paygate.Common.Domain.Services.ICommonAppService` does not contain a method with signature `CheckLimitMinBalanceAccount()`
   at Hangfire.Storage.InvocationData.DeserializeJob()
   --- End of inner exception stack trace ---
   at Hangfire.Storage.InvocationData.DeserializeJob()
   at Hangfire.RecurringJobEntity..ctor(String recurringJobId, IDictionary`2 recurringJob, ITimeZoneResolver timeZoneResolver, DateTime now)
   --- End of inner exception stack trace ---
   at Hangfire.Server.RecurringJobScheduler.ScheduleRecurringJob(BackgroundProcessContext context, IStorageConnection connection, String recurringJobId, RecurringJobEntity recurringJob, DateTime now)
2021-05-24 22:34:56.539 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 22:34:56.624 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance)
2021-05-24 22:34:56.837 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621868764736+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":13,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 22:34:57.178 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance_Error:System.NullReferenceException: Object reference not set to an instance of an object.
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 116
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.WarningBalance() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 293
2021-05-24 22:34:57.388 +07:00 [WRN] [Hangfire.AutomaticRetryAttribute.] Failed to process the job '60abc7a0ed5122c1a8b7a3e9': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:30.
System.NotImplementedException: Unable to resolve service 'WorkerBillQueryRequest'
   at ServiceStack.Host.ServiceController.GetService(Type requestType) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\Host\ServiceController.cs:line 804
   at ServiceStack.Host.ServiceController.GatewayExecuteAsync(Object requestDto, IRequest req, Boolean applyFilters) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\Host\ServiceController.cs:line 765
   at ServiceStack.InProcessServiceGateway.ExecAsync[TResponse](Object request) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 131
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 235
   at ServiceStack.InProcessServiceGateway.SendAsync[TResponse](Object requestDto, CancellationToken token) in C:\BuildAgent\work\3481147c480f4a2f\src\ServiceStack\InProcessServiceGateway.cs:line 241
   at HLS.Paygate.Common.Domain.Services.CommonAppService.AutoCheckPayBill() in E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Domain\Services\CommonAppService.cs:line 209
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
2021-05-24 22:34:57.529 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 22:34:57.573 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 22:34:57.617 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 22:34:57.626 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 22:34:57.626 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 22:34:57.626 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 22:34:57.627 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 22:34:57.659 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 22:34:57.660 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 22:34:57.660 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 22:34:57.662 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 22:34:57.666 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:19164:963ae003 successfully announced in 6.5861 ms
2021-05-24 22:34:57.676 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:19164:16bf6a74 successfully announced in 7.3047 ms
2021-05-24 22:34:57.676 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:19164:963ae003 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 22:34:57.680 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:19164:16bf6a74 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 22:34:58.201 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:19164:963ae003 all the dispatchers started
2021-05-24 22:34:58.212 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:19164:16bf6a74 all the dispatchers started
2021-05-24 22:34:58.393 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 22:34:58.398 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 22:34:58.399 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 22:34:58.399 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 22:35:11.690 +07:00 [WRN] [Hangfire.Server.RecurringJobScheduler.] Recurring job 'ICommonAppService.CheckLimitMinBalanceAccount' can't be scheduled due to an error and will be retried in 00:00:15.
System.InvalidOperationException: Recurring job can't be scheduled, see inner exception for details.
 ---> Hangfire.Common.JobLoadException: Could not load the job. See inner exception for the details.
 ---> System.InvalidOperationException: The type `HLS.Paygate.Common.Domain.Services.ICommonAppService` does not contain a method with signature `CheckLimitMinBalanceAccount()`
   at Hangfire.Storage.InvocationData.DeserializeJob()
   --- End of inner exception stack trace ---
   at Hangfire.Storage.InvocationData.DeserializeJob()
   at Hangfire.RecurringJobEntity..ctor(String recurringJobId, IDictionary`2 recurringJob, ITimeZoneResolver timeZoneResolver, DateTime now)
   --- End of inner exception stack trace ---
   at Hangfire.Server.RecurringJobScheduler.ScheduleRecurringJob(BackgroundProcessContext context, IStorageConnection connection, String recurringJobId, RecurringJobEntity recurringJob, DateTime now)
2021-05-24 22:35:26.887 +07:00 [WRN] [Hangfire.Server.RecurringJobScheduler.] Recurring job 'ICommonAppService.CheckLimitMinBalanceAccount' can't be scheduled due to an error and will be retried in 00:00:15.
System.InvalidOperationException: Recurring job can't be scheduled, see inner exception for details.
 ---> Hangfire.Common.JobLoadException: Could not load the job. See inner exception for the details.
 ---> System.InvalidOperationException: The type `HLS.Paygate.Common.Domain.Services.ICommonAppService` does not contain a method with signature `CheckLimitMinBalanceAccount()`
   at Hangfire.Storage.InvocationData.DeserializeJob()
   --- End of inner exception stack trace ---
   at Hangfire.Storage.InvocationData.DeserializeJob()
   at Hangfire.RecurringJobEntity..ctor(String recurringJobId, IDictionary`2 recurringJob, ITimeZoneResolver timeZoneResolver, DateTime now)
   --- End of inner exception stack trace ---
   at Hangfire.Server.RecurringJobScheduler.ScheduleRecurringJob(BackgroundProcessContext context, IStorageConnection connection, String recurringJobId, RecurringJobEntity recurringJob, DateTime now)
2021-05-24 22:35:28.571 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 22:35:28.578 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621868764736+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":13,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 22:35:28.780 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 22:35:28.780 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 22:35:42.049 +07:00 [WRN] [Hangfire.Server.RecurringJobScheduler.] Recurring job 'ICommonAppService.CheckLimitMinBalanceAccount' can't be scheduled due to an error and will be retried in 00:00:15.
System.InvalidOperationException: Recurring job can't be scheduled, see inner exception for details.
 ---> Hangfire.Common.JobLoadException: Could not load the job. See inner exception for the details.
 ---> System.InvalidOperationException: The type `HLS.Paygate.Common.Domain.Services.ICommonAppService` does not contain a method with signature `CheckLimitMinBalanceAccount()`
   at Hangfire.Storage.InvocationData.DeserializeJob()
   --- End of inner exception stack trace ---
   at Hangfire.Storage.InvocationData.DeserializeJob()
   at Hangfire.RecurringJobEntity..ctor(String recurringJobId, IDictionary`2 recurringJob, ITimeZoneResolver timeZoneResolver, DateTime now)
   --- End of inner exception stack trace ---
   at Hangfire.Server.RecurringJobScheduler.ScheduleRecurringJob(BackgroundProcessContext context, IStorageConnection connection, String recurringJobId, RecurringJobEntity recurringJob, DateTime now)
2021-05-24 22:35:57.228 +07:00 [WRN] [Hangfire.Server.RecurringJobScheduler.] Recurring job 'ICommonAppService.CheckLimitMinBalanceAccount' can't be scheduled due to an error and will be retried in 00:00:15.
System.InvalidOperationException: Recurring job can't be scheduled, see inner exception for details.
 ---> Hangfire.Common.JobLoadException: Could not load the job. See inner exception for the details.
 ---> System.InvalidOperationException: The type `HLS.Paygate.Common.Domain.Services.ICommonAppService` does not contain a method with signature `CheckLimitMinBalanceAccount()`
   at Hangfire.Storage.InvocationData.DeserializeJob()
   --- End of inner exception stack trace ---
   at Hangfire.Storage.InvocationData.DeserializeJob()
   at Hangfire.RecurringJobEntity..ctor(String recurringJobId, IDictionary`2 recurringJob, ITimeZoneResolver timeZoneResolver, DateTime now)
   --- End of inner exception stack trace ---
   at Hangfire.Server.RecurringJobScheduler.ScheduleRecurringJob(BackgroundProcessContext context, IStorageConnection connection, String recurringJobId, RecurringJobEntity recurringJob, DateTime now)
2021-05-24 22:36:12.384 +07:00 [ERR] [Hangfire.Server.RecurringJobScheduler.] Recurring job 'ICommonAppService.CheckLimitMinBalanceAccount' can't be scheduled due to an error and will be disabled.
System.InvalidOperationException: Recurring job can't be scheduled, see inner exception for details.
 ---> Hangfire.Common.JobLoadException: Could not load the job. See inner exception for the details.
 ---> System.InvalidOperationException: The type `HLS.Paygate.Common.Domain.Services.ICommonAppService` does not contain a method with signature `CheckLimitMinBalanceAccount()`
   at Hangfire.Storage.InvocationData.DeserializeJob()
   --- End of inner exception stack trace ---
   at Hangfire.Storage.InvocationData.DeserializeJob()
   at Hangfire.RecurringJobEntity..ctor(String recurringJobId, IDictionary`2 recurringJob, ITimeZoneResolver timeZoneResolver, DateTime now)
   --- End of inner exception stack trace ---
   at Hangfire.Server.RecurringJobScheduler.ScheduleRecurringJob(BackgroundProcessContext context, IStorageConnection connection, String recurringJobId, RecurringJobEntity recurringJob, DateTime now)
2021-05-24 22:38:07.354 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.SendBotMessageToGroup, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal438ad0ca08dd4d9d9df07e3b7e68d24c","chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.814.000đ, lúc 24/05/2021 22:38:01.%0ANội dung: test.%0AMã giao dịch: D2105240229818","module":"Balance","messageType":"0","botType":"0","timeStamp":"\/Date(1621870684313+0700)\/","correlationId":"f2d4c07ef0fb4817b935454656ccf26f"}
2021-05-24 22:38:08.339 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 100.000đ. Số dư: 1.814.000đ, lúc 24/05/2021 22:38:01.%0ANội dung: test.%0AMã giao dịch: D2105240229818","module":"Balance","messageType":"0","botType":"0"}
2021-05-24 22:38:09.645 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":235,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621870689,"text":"\u274c Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 22:38:08, VietNam-[Balance]-[0]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 100.000\u0111. S\u1ed1 d\u01b0: 1.814.000\u0111, l\u00fac 24/05/2021 22:38:01.\nN\u1ed9i dung: test.\nM\u00e3 giao d\u1ecbch: D2105240229818"}
2021-05-24 22:45:00.752 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 22:45:00.759 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621870528782+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":14,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 22:45:00.874 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 22:45:00.874 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 22:54:44.422 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.SendBotMessageToGroup, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal438ad0ca08dd4d9d9df07e3b7e68d24c","chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 1.000.000đ. Số dư: 2.914.000đ, lúc 24/05/2021 22:54:28.%0ANội dung: tesst.%0AMã giao dịch: D2105240229821","module":"Balance","messageType":"Message","botType":"Sale","timeStamp":"\/Date(1621871672418+0700)\/","correlationId":"4a80949a5bed47a383043499ece8ec0c"}
2021-05-24 22:54:44.963 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 1.000.000đ. Số dư: 2.914.000đ, lúc 24/05/2021 22:54:28.%0ANội dung: tesst.%0AMã giao dịch: D2105240229821","module":"Balance","messageType":"Message","botType":"Sale"}
2021-05-24 22:54:45.997 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":236,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621871686,"text":"\u2705 Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 22:54:44, VietNam-[Balance]-[Message]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 1.000.000\u0111. S\u1ed1 d\u01b0: 2.914.000\u0111, l\u00fac 24/05/2021 22:54:28.\nN\u1ed9i dung: tesst.\nM\u00e3 giao d\u1ecbch: D2105240229821"}
2021-05-24 22:55:43.162 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.BotSendMessageConsumer.] SendBotMessageToGroup request:{"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.SendBotMessageToGroup, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternal438ad0ca08dd4d9d9df07e3b7e68d24c","chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 1.000.000đ. Số dư: 3.914.000đ, lúc 24/05/2021 22:55:38.%0ANội dung: tesst.%0AMã giao dịch: D2105240229822","module":"Balance","messageType":"Message","botType":"Sale","timeStamp":"\/Date(1621871743141+0700)\/","correlationId":"6bcf9fae425240b38d7c54d3f7e32ee2"}
2021-05-24 22:55:43.163 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-438003503","title":"Thông báo Nạp tiền TK","message":"Nhất Trần xin thông báo .Tài khoản NT938890-Dại Lý Gunner Hoang vừa được nạp thành công số tiền 1.000.000đ. Số dư: 3.914.000đ, lúc 24/05/2021 22:55:38.%0ANội dung: tesst.%0AMã giao dịch: D2105240229822","module":"Balance","messageType":"Message","botType":"Sale"}
2021-05-24 22:55:43.566 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":237,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-438003503,"title":"Nh\u1ea5t Tr\u1ea7n DEV","type":"group","all_members_are_administrators":true},"date":1621871743,"text":"\u2705 Th\u00f4ng b\u00e1o N\u1ea1p ti\u1ec1n TK\n24/05/2021 22:55:43, VietNam-[Balance]-[Message]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o .T\u00e0i kho\u1ea3n NT938890-D\u1ea1i L\u00fd Gunner Hoang v\u1eeba \u0111\u01b0\u1ee3c n\u1ea1p th\u00e0nh c\u00f4ng s\u1ed1 ti\u1ec1n 1.000.000\u0111. S\u1ed1 d\u01b0: 3.914.000\u0111, l\u00fac 24/05/2021 22:55:38.\nN\u1ed9i dung: tesst.\nM\u00e3 giao d\u1ecbch: D2105240229822"}
2021-05-24 23:00:01.270 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 23:00:01.279 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621871100875+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":15,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 23:00:01.347 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] WarningBalance)
2021-05-24 23:00:01.380 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: VTDD BILLING-MASTER return: {"result":4655800000.00,"success":true,"error":{"code":0}}
2021-05-24 23:00:01.414 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] CheckBalance: VTDD TOPUP-NT994838 return: {"result":0,"success":true,"error":{"code":0}}
2021-05-24 23:00:01.416 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup: {"chatId":"-591929747","title":"Cảnh báo số dư tài khoản số dư tài khoản VTDD TOPUP","message":"Nhất Trần xin thông báo số dư tài khoản VTDD TOPUP-NT994838 hiện tại là: 0đ.\nVui lòng nạp tiền để đảm bảo dịch vụ. Trân trọng cám ơn!","module":"Balance","messageType":"Wraning","botType":"Sale"}
2021-05-24 23:00:01.432 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 23:00:01.432 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 23:00:02.420 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.BotMessageService.] BotTypeSendMessageToGroup:{"ok":true,"result":{"message_id":238,"from":{"id":1480315274,"is_bot":true,"first_name":"Nh\u1ea5t Tr\u1ea7n DEV","username":"nhattran_dev_bot"},"chat":{"id":-591929747,"title":"Nh\u00f3m Gunner","type":"group","all_members_are_administrators":true},"date":1621872002,"text":"\u26a0 C\u1ea3nh b\u00e1o s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n VTDD TOPUP\n24/05/2021 23:00:01, VietNam-[Balance]-[Warning]\nNh\u1ea5t Tr\u1ea7n xin th\u00f4ng b\u00e1o s\u1ed1 d\u01b0 t\u00e0i kho\u1ea3n VTDD TOPUP-NT994838 hi\u1ec7n t\u1ea1i l\u00e0: 0\u0111.\nVui l\u00f2ng n\u1ea1p ti\u1ec1n \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o d\u1ecbch v\u1ee5. Tr\u00e2n tr\u1ecdng c\u00e1m \u01a1n!"}
2021-05-24 23:13:33.378 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 23:13:33.463 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 23:13:33.464 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 23:13:33.464 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 23:13:33.533 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:14024:5f076cd2 successfully announced in 24.6952 ms
2021-05-24 23:13:33.545 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:14024:5f076cd2 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 23:13:33.572 +07:00 [INF] [Hangfire.Server.ServerWatchdog.] 3 servers were removed due to timeout
2021-05-24 23:13:33.658 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:14024:5f076cd2 all the dispatchers started
2021-05-24 23:13:33.930 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 23:13:34.651 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 23:13:35.052 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 23:13:35.171 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 23:13:35.177 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 23:13:35.178 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 23:13:35.178 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 23:13:35.178 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 23:13:35.198 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 23:13:35.200 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 23:13:35.201 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 23:13:35.201 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 23:13:35.209 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14024:4e699ed1 successfully announced in 10.259 ms
2021-05-24 23:13:35.222 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14024:79ec6d4f successfully announced in 8.5627 ms
2021-05-24 23:13:35.225 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14024:4e699ed1 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 23:13:35.228 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14024:79ec6d4f is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 23:13:35.467 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14024:4e699ed1 all the dispatchers started
2021-05-24 23:13:35.507 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:14024:79ec6d4f all the dispatchers started
2021-05-24 23:13:35.710 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 23:13:35.711 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 23:13:35.711 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 23:13:35.711 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 23:14:44.769 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 23:14:44.857 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 23:14:44.857 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 23:14:44.858 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 23:14:44.908 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:10704:6fb4aa50 successfully announced in 24.811 ms
2021-05-24 23:14:44.917 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:10704:6fb4aa50 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 23:14:45.127 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server gunner:10704:6fb4aa50 all the dispatchers started
2021-05-24 23:14:45.342 +07:00 [INF] [MassTransit.] Bus started: rabbitmq://103.109.43.93/paygate
2021-05-24 23:14:46.162 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered service with Consul Paygate.Discovery.Consul.ConsulServiceRegistration
2021-05-24 23:14:46.394 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-Heartbeat`
2021-05-24 23:14:46.652 +07:00 [INF] [Paygate.Discovery.Consul.ConsulClient.] Registered health check with Consul `SS-HealthCheck`
2021-05-24 23:14:46.659 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 23:14:46.659 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 23:14:46.659 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 23:14:46.660 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 23:14:46.677 +07:00 [INF] [Hangfire.BackgroundJobServer.] Starting Hangfire Server using job storage: 'Connection string: mongodb://<username>:<password>@10.8.0.5:27017,10.8.0.5:27018,10.8.0.5:27019, database name: PaygateCommon, prefix: hangfire'
2021-05-24 23:14:46.678 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Mongo DB job storage:
2021-05-24 23:14:46.678 +07:00 [INF] [Hangfire.BackgroundJobServer.]     Prefix: hangfire.
2021-05-24 23:14:46.679 +07:00 [INF] [Hangfire.BackgroundJobServer.] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2021-05-24 23:14:46.686 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:10704:7a627762 successfully announced in 8.2701 ms
2021-05-24 23:14:46.688 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:10704:7a627762 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 23:14:46.691 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:10704:83347c8b successfully announced in 8.0855 ms
2021-05-24 23:14:46.698 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:10704:83347c8b is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, MongoExpirationManager, MongoNotificationObserver, Worker, DelayedJobScheduler, RecurringJobScheduler...
2021-05-24 23:14:46.852 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:10704:7a627762 all the dispatchers started
2021-05-24 23:14:46.871 +07:00 [INF] [Hangfire.Server.BackgroundServerProcess.] Server commonservice-gunner:10704:83347c8b all the dispatchers started
2021-05-24 23:14:47.067 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Now listening on: "http://localhost:6790"
2021-05-24 23:14:47.068 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Application started. Press Ctrl+C to shut down.
2021-05-24 23:14:47.069 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Hosting environment: "Development"
2021-05-24 23:14:47.069 +07:00 [INF] [Microsoft.Hosting.Lifetime.] Content root path: "E:\Source\TopupCard\topup_gate_core\HLS.Paygate.Common.Hosting"
2021-05-24 23:15:00.550 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] Begin_AutoCheckPayBill
2021-05-24 23:15:00.652 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBill:{"createdDate":"\/Date(1621593834103+0700)\/","lastQueryDate":"\/Date(1621872001433+0700)\/","description":"{\"result\":{\"__type\":\"HLS.Paygate.Shared.MessageResponseBase, HLS.Paygate.Shared\",\"responseCode\":\"01\",\"responseMessage\":\"Giao dịch thành công\",\"transCodeProvider\":\"NT21052100000018\",\"providerCode\":\"ZOTA_TEST\"},\"success\":true,\"error\":{\"code\":0,\"message\":\"Thanh toán cho hóa đơn 0969207309 thành công\"}}","accountCode":"NT937204","productCode":"VTE_BILL","categoryCode":"MOBILE_BILL","serviceCode":"PAY_BILL","productName":"Viettel trả sau","lastTransCode":"P2105210229773","invoiceInfo":"{\"FullName\":\"\",\"CustomerReference\":\"0969207309\",\"Address\":\"\",\"Period\":\"\",\"ProductName\":\"Viettel trả sau\",\"ProductCode\":\"VTE_BILL\"}","paymentAmount":0,"invoiceCode":"0969207309","status":"Paid","isQueryBill":true,"isLastSuccess":true,"isInvoice":false,"retryCount":16,"responseQuery":"{\"responseStatus\":{\"errorCode\":\"00\",\"message\":\"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ\"}}","id":"7a956eb1e50f4732ba45b6ee1ea48ad1","addedAtUtc":"\/Date(1621593834096)\/","version":0}
2021-05-24 23:15:00.877 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillResponse:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 23:15:00.877 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.CommonAppService.] ProcessQueryBillError:{"responseStatus":{"errorCode":"00","message":"Dịch vụ chưa được thiết lập. Vui lòng liên hệ CSKH để được hỗ trợ"}}
2021-05-24 23:15:29.147 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.AuditLogConsumer.] AccountActivityHistoryMessage request:{"__type":"GreenPipes.DynamicInternal.Paygate.Contracts.Commands.Commons.AccountActivitiesCommand, Paygate.Contracts.Commands.CommonsGreenPipes.DynamicInternale07c30c75e154362bef551052e503d4d","accountCode":"NT982510","fullName":"Đại lý API Xuân Test 2","accountType":2,"agentType":2,"phoneNumber":"0921000001","userName":"admin","note":"tesst","payload":"{\"UserId\":11058,\"Note\":\"tesst\"}","srcValue":"true","desValue":"false","attachment":"","accountActivityType":4}
2021-05-24 23:15:35.629 +07:00 [INF] [HLS.Paygate.Common.Domain.Services.AuditLogService.] AddAccountActivityHistory request:{"accountCode":"NT982510","fullName":"Đại lý API Xuân Test 2","accountType":2,"agentType":2,"phoneNumber":"0921000001","userName":"admin","note":"tesst","payload":"{\"UserId\":11058,\"Note\":\"tesst\"}","srcValue":"true","desValue":"false","attachment":"","accountActivityType":"Lock"}
2021-05-24 23:15:37.824 +07:00 [INF] [HLS.Paygate.Common.Interface.Consumers.AuditLogConsumer.] AccountActivityHistoryMessage resoponse:True
